sudo: required

services:
- docker

before_install:
- JENKINS_VERSION=centos

script:
- docker build -t wisecloud/jenkins:${JENKINS_VERSION} .

deploy:
  provider: script
  script: docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD && docker push wisecloud/jenkins:${VERSION}
  on:
    all_branches: true
    #condition: "$TRAVIS_BRANCH =~ ^v[0-9]+\\.[0-9]+(\\.[0-9]+)?(-\\S*)?$"
